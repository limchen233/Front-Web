### 对Virtual DOM的理解

虚拟DOM在`Vue.js`主要做了两件事：

- 提供与真实DOM节点所对应的虚拟节点`vnode`
- 将虚拟节点`vnode`和旧虚拟节点`oldVnode`进行对比，然后更新视图

**虚拟DOM的最终目标是将虚拟节点渲染到视图上。**

但是如果直接使用虚拟节点覆盖旧节点的话，会有很多不必要的操作。例如，一个`ul`标签下有很多个`li`标签,其中只有一个`li`有变化，这种情况下如果使用新的`ul`去替代旧的`ul`,因为这些不必要的DOM操作而造成了性能上的浪费。

为了实现高效的DOM操作，虚拟DOM在虚拟节点映射到视图的过程中，将虚拟节点与上一次渲染视图所使用的旧虚拟节点（`oldVnode`）做对比，**我们通过patch 的核心—-`diff `算法，找出本次DOM需要更新的节点来更新，其他的不更新**。

### `diff `算法的实现过程

`diff `算法本身非常复杂，实现难度很大。粗略介绍以下两个核心函数实现流程：

- patch(`container`,`vnode`) :初次渲染的时候，将`VDOM`渲染成真正的DOM然后插入到容器里面。
- patch(`vnode`,`newVnode`):再次渲染的时候，将新的`vnode`和旧的`vnode`相对比，然后之间差异应用到所构建的真正的DOM树上。